#!/bin/bash

msg "Setting up tools..."

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# The next line updates PATH for the Google Cloud SDK.
if [ -f '~/.mcustiel/dev-tools/google-cloud-sdk/path.bash.inc' ]; then 
  . '~/.mcustiel/dev-tools/google-cloud-sdk/path.bash.inc'; 
fi

# The next line enables shell command completion for gcloud.
if [ -f '~/.mcustiel/dev-tools/google-cloud-sdk/completion.bash.inc' ]; then 
  . '~/.mcustiel/dev-tools/google-cloud-sdk/completion.bash.inc'; 
fi

if [ "$(uname -s)" = "Darwin" ] ; then
  # Homebrew
  eval "$(/opt/homebrew/bin/brew shellenv)"

  source "/opt/homebrew/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/path.bash.inc"

  # Init jenv (autogenerated code)
  eval export PATH="${HOME}/.jenv/shims:${PATH}"
  export JENV_SHELL=bash
  export JENV_LOADED=1
  unset JAVA_HOME
  unset JDK_HOME
  source '/opt/homebrew/Cellar/jenv/0.5.6/libexec/libexec/../completions/jenv.bash'
  jenv rehash 2>/dev/null
  jenv refresh-plugins
  jenv() {
    type typeset &> /dev/null && typeset command
    command="$1"
    if [ "$#" -gt 0 ]; then
      shift
    fi

    case "$command" in
      enable-plugin|rehash|shell|shell-options)
        eval "$(jenv "sh-$command" "$@")";;
      *)
        command jenv "$command" "$@";;
    esac
  }
fi
successmsg "Tools done. ${CHECK}"
